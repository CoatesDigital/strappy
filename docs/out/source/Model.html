<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='framework-mvc-Model'>/**
</span> * @class framework.mvc.Model
 * 
 * 
 * 
 * @mixins framework.trait.ComponentConnector
 * @mixins framework.trait.signal.Send
 * @abstract
 * 
 * @uses framework.trait.ComponentConnector
 * @uses framework.trait.signal.Send
 */
$JSKK.Class.create
(
	{
		$namespace:	'framework.mvc',
		$name:		'Model',
		$uses:
		[
			framework.trait.ComponentConnector,
			framework.trait.signal.Send
		]
	}
)
(
	{},
	{
<span id='framework-mvc-Model-property-data'>		/**
</span>		 * @property {Array} data Holds the data for this model (store).
		 * @private 
		 */
		data:		[],
<span id='global-property-proxy'>		/**
</span>		 * @property {framework.Proxy} proxy
		 * @private
		 * @ignore
		 */
		proxy:		null,
<span id='framework-mvc-Model-method-getRecord'>		/**
</span>		 * Fetches a record based on its index in the store.
		 * @param {Number} index The index.
		 * @return {Mixed} The record.
		 */
        getRecord: function(index)
		{
			return this.data[index];
		},
<span id='framework-mvc-Model-method-setRecord'>		/**
</span>		 * Sets a record at a given index in the store.
		 * @param {Number} index The index.
		 * @param {Mixed} data The new data to set.
		 */
        setRecord: function(index,data)
		{
			data.id=this.data[0].id;
			this.data[index]=data;
			this.sendSignal('view.change',data);
		},
//		get: function(key)
//		{
//			var	parts	=key.split('.'),
//				object	=this.data;
//			for (var i=0,j=parts.length; i&lt;j; i++)
//			{
//				if (Object.isDefined(object[parts[i]]))
//				{
//					object=object[parts[i]];
//				}
//				else
//				{
//					return null;
//				}
//			}
//			return object;
//		},
//		set: function(key,value)
//		{
//			var	parts	=key.split('.'),
//				object	=this.data;
//			for (var i=0,j=parts.length; i&lt;j; i++)
//			{
//				if (i+1==j)
//				{
//					object[parts[i]]=value;
//					break;
//				}
//				if (Object.isDefined(object[parts[i]]))
//				{
//					object=object[parts[i]];
//				}
//				else
//				{
//					if (i+1!=j)
//					{
//						object[parts[i]]={};
//						object=object[parts[i]];
//					}
//				}
//			}
//			console.debug('ID:',this.getID());
//			this.sendSignal(framework.Signal.MODEL_DONE_CHANGE,{name:this.getID()});
//			return this;
//		},
<span id='framework-mvc-Model-method-each'>		/**
</span>		 * This method allows you to iterate over each item
		 * in the model's data store.
		 * 
		 * Example:
	$JSKK.Class.create
	(
		{
			$namespace:	'Application.component.myComponent.controller',
			$name:		'Default',
			$extends:	framework.mvc.Controller
		}
	)
	(
		{},
		{
			generateList: function()
			{
				var HTML=['&lt;ul&gt;'];
				this.getModel('Default').each
				(
					function(item)
					{
						HTML.push('&lt;li&gt;&lt;a href=&quot;'+item.url+'&quot;&gt;'+item.name+'&lt;/a&gt;&lt;/li&gt;');
					}
				);
				HTML.push('&lt;/ul&gt;');
				return HTML.join('');
			}
		}
	);
		 * @param {Function} callback A closure which will be called at each iteration.
		 * The first parameter of the closure will be the data item.
		 * @return {framework.mvc.Model}
		 */
		each: function(callback)
		{
			this.data.each(callback);
			return this;
		},
<span id='framework-mvc-Model-method-add'>		/**
</span>		 * Adds a record to the model's store.
		 * @param {Mixed} record The record to be added to the store.
		 * @return {framework.mvc.Model}
		 */
		add: function(record)
		{
			this.data.push(record);
			this.sendSignal(framework.Signal.MODEL_DONE_CHANGE,{name:this.getID()});
			return this;
		},
<span id='framework-mvc-Model-method-remove'>		/**
</span>		 * Removes a record from the store.
		 * @param {Mixed} record The record to be removed from the store.
		 * @return {framework.mvc.Model}
		 */
		remove: function(record)
		{
			var newData=[];
			for (var i=0,j=this.data.length; i&lt;j; i++)
			{
				if (this.data[i]!=record)
				{
					newData.push(this.data[i]);
				}
			}
			this.data=newData;
			this.sendSignal(framework.Signal.MODEL_DONE_CHANGE,{name:this.getID()});
			return this;
		}
	}
);</pre>
</body>
</html>
